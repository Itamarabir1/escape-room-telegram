:root{--tg-bg: var(--tg-theme-bg-color, #ffffff);--tg-text: var(--tg-theme-text-color, #000000);--tg-hint: var(--tg-theme-hint-color, #666666);--tg-button: var(--tg-theme-button-color, #2481cc);--tg-button-text: var(--tg-theme-button-text-color, #ffffff)}body{font-family:sans-serif;background-color:#000;color:var(--tg-text);margin:0;padding:0;min-height:100vh;overflow:hidden}body:not(.game-has-room){padding:20px;display:flex;flex-direction:column;align-items:center;justify-content:center;overflow:auto}#root{width:100%;max-width:600px}.error{color:#c00}.status{color:var(--tg-hint)}.room-situation{text-align:center;margin:0 0 16px;padding:12px 16px;background:#0000000d;border-radius:10px;font-size:1em;line-height:1.5;color:#fff}.game-container{text-align:center;padding:20px;border:2px solid var(--tg-button);border-radius:15px}body.game-has-room .game-container{padding:0;border:none;border-radius:0;max-width:none}body.game-has-room .room-section{margin:0;padding:0}body.game-has-room .room-situation{position:absolute;top:0;left:0;right:0;z-index:10;margin:0;border-radius:0;color:#fff}body.game-has-room .room-situation.room-situation-below-btn{position:static;top:auto;left:auto;right:auto;z-index:auto}.room-timer{position:fixed;top:0;left:0;z-index:20;padding:10px 14px;background:#000000bf;color:#fff;font-family:ui-monospace,monospace;font-size:1.25rem;line-height:1;border-radius:0 0 8px;direction:ltr;letter-spacing:.05em}.room-start-ui{position:fixed;top:16px;left:0;right:0;z-index:25;display:flex;flex-direction:column;align-items:center;gap:16px;width:100%;max-width:100vw;padding:0 12px;box-sizing:border-box}.room-start-btn{padding:12px 32px;font-size:1.1rem;font-weight:600;border-radius:999px;border:none;background:#fffffff2;color:#1a1a1a;cursor:pointer;box-shadow:0 4px 20px #00000040;transition:transform .15s,box-shadow .15s}.room-start-btn:hover{transform:scale(1.03);box-shadow:0 6px 24px #0000004d}.room-start-btn:active{transform:scale(.98)}.room-situation-below-btn{margin:4px 0 0;padding:10px 16px;font-size:.95rem;line-height:1.5;color:#fff;text-align:center;text-shadow:0 1px 3px rgba(0,0,0,.8);width:100%;max-width:100%;box-sizing:border-box;-webkit-hyphens:auto;hyphens:auto;word-spacing:.02em;text-align:justify;text-align-last:center;background:#00000080;border-radius:10px}.puzzle-solved-banner{margin:-4px -4px 16px;padding:12px 16px;background:#2481cc33;border:1px solid var(--tg-button);border-radius:10px;font-weight:500;text-align:center;direction:rtl}.players-list{text-align:right;margin:12px 0}button{background-color:var(--tg-button);color:var(--tg-button-text);border:none;padding:10px 20px;border-radius:8px;cursor:pointer;font-size:16px}.room-loading{text-align:center;padding:2rem;color:var(--tg-hint)}.room-loading-overlay{position:fixed;top:0;right:0;bottom:0;left:0;z-index:100;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1rem;background:#000000eb;transition:opacity .3s ease;pointer-events:auto}.room-loading-overlay.room-loading-overlay--hidden{opacity:0;pointer-events:none}.room-loading-spinner{width:48px;height:48px;border:3px solid rgba(255,255,255,.2);border-top-color:#fff;border-radius:50%;animation:room-loading-spin .9s linear infinite}@keyframes room-loading-spin{to{transform:rotate(360deg)}}.room-loading-overlay-text{margin:0;color:#fff;font-size:1.1rem}.room-section{visibility:hidden;opacity:0;transition:visibility .3s ease,opacity .3s ease}.room-section.room-section--ready{visibility:visible;opacity:1}.room-wrapper{width:100vw;height:100vh;overflow-x:auto;overflow-y:hidden;scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;touch-action:pan-x;direction:ltr}.room-wrapper::-webkit-scrollbar{display:none}.room-container{position:relative;height:100vh;display:inline-block}.room-image{height:100vh;width:auto;display:block;margin:0 auto;pointer-events:none}.room-hotspot{position:absolute;cursor:pointer;border:2px solid rgba(255,255,0,.5);border-radius:8px;background:#ffff0014;transition:background .2s;padding:0;margin:0;box-sizing:border-box}.room-hotspot:hover,.room-hotspot:active{background:#ff03}.room-hotspot-label{font-size:.75rem;color:#ffffffe6;pointer-events:none;visibility:hidden}.room-hotspot:hover .room-hotspot-label{visibility:visible}.room-hotspots-svg{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none}.room-hotspots-svg .room-hotspot-shape{pointer-events:auto;cursor:pointer;transition:fill .2s}.room-hotspots-svg .room-hotspot-shape:hover,.room-hotspots-svg .room-hotspot-shape:focus-visible{fill:#ffc80059}.room-door-video-svg{z-index:5;pointer-events:none}.door-video-wrap{width:100%;height:100%;overflow:hidden}.door-video{width:100%;height:100%;object-fit:cover;display:block}.door-video::-webkit-media-controls{display:none!important}.door-locked-banner{position:fixed;bottom:24px;left:50%;transform:translate(-50%);z-index:30;padding:12px 20px;background:#000000e0;color:#fff;border-radius:10px;font-size:1rem;max-width:90vw;text-align:center;box-shadow:0 4px 12px #0006}.room-hotspots-svg.room-hotspots-disabled .room-hotspot-shape{pointer-events:none;cursor:default}.room-placeholder-wrap{width:100%;overflow-x:auto;overflow-y:auto;-webkit-overflow-scrolling:touch;touch-action:pan-x pan-y;border-radius:12px;margin:12px 0;background:#111}.room-placeholder{position:relative;width:1600px;height:1200px;min-width:1600px;box-sizing:border-box;background:linear-gradient(135deg,#2a2a2a,#1a1a1a);border-radius:12px;border:2px solid var(--tg-hint)}.room-placeholder-label{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#ffffff80;margin:0;pointer-events:none}.room-item-hotspot{position:absolute;width:120px;min-height:44px;padding:8px 12px;font-size:14px;white-space:nowrap;transform:translate(-50%,-50%);box-shadow:0 2px 8px #0000004d}.room-title{font-weight:700;margin:8px 0 4px}.room-desc{color:var(--tg-hint);font-size:.95em;margin-bottom:8px}.room-lore{font-style:italic;margin:8px 0;padding:8px;background:#0000000d;border-radius:8px}.room-items{margin-top:16px;text-align:right}.room-items-title{font-weight:700;margin-bottom:8px}.room-items-list{list-style:none;padding:0;margin:0;display:flex;flex-wrap:wrap;gap:8px;justify-content:center}.room-items-list li{margin:0}.room-items-list button.item-unlock{cursor:pointer}.modal-overlay{position:fixed;top:0;right:0;bottom:0;left:0;background:#0009;display:flex;align-items:center;justify-content:center;z-index:1000;padding:20px}.modal-content{background:var(--tg-bg);color:var(--tg-text);padding:24px;border-radius:16px;max-width:min(400px,100vw - 40px);width:100%;max-height:90vh;overflow-y:auto;text-align:right;direction:rtl}.modal-text-fullwidth{width:100%;max-width:100%;box-sizing:border-box;text-align:justify;text-align-last:right;-webkit-hyphens:auto;hyphens:auto;word-spacing:.02em}.modal-content h2{margin-top:0;margin-bottom:12px}.modal-backstory{margin:12px 0;font-size:.95em;white-space:pre-line}.modal-clue{margin:12px 0}.modal-clue code{font-family:monospace;background:#00000014;padding:4px 8px;border-radius:4px;direction:ltr;display:inline-block}.modal-secret-hint{margin-top:6px;font-weight:500}.modal-prompt{margin:8px 0 12px}.modal-input{width:100%;box-sizing:border-box;padding:10px 12px;font-size:16px;border:2px solid var(--tg-hint);border-radius:8px;margin-bottom:12px;direction:ltr;text-align:left}.modal-success{color:#0a0;margin:8px 0}.modal-error{color:#c00;margin:8px 0}.modal-actions{display:flex;gap:12px;justify-content:flex-end;margin-top:16px}.modal-actions button,.modal-close-btn{min-height:44px;min-width:80px;cursor:pointer;touch-action:manipulation}.game-over-overlay{position:fixed;top:0;right:0;bottom:0;left:0;z-index:100;background:#000000e6;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:24px;text-align:center;color:#fff}.game-over-title{font-size:2rem;margin:0 0 16px;color:#e74c3c}.game-over-text{font-size:1.25rem;margin:0 0 8px}.game-over-hint{font-size:1rem;color:#fffc;margin:0}
